"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6336],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return p}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(a),p=r,k=m["".concat(s,".").concat(p)]||m[p]||c[p]||o;return a?n.createElement(k,i(i({ref:t},u),{},{components:a})):n.createElement(k,i({ref:t},u))}));function p(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8988:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),i=["components"],l={title:"Join as a Validator"},s=void 0,d={unversionedId:"Validators/join-validator-testnet",id:"Validators/join-validator-testnet",title:"Join as a Validator",description:"How to become a validator on IDEP Network",source:"@site/docs/Validators/join-validator-testnet.md",sourceDirName:"Validators",slug:"/Validators/join-validator-testnet",permalink:"/docs/Validators/join-validator-testnet",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Validators/join-validator-testnet.md",tags:[],version:"current",frontMatter:{title:"Join as a Validator"},sidebar:"Docs",previous:{title:"Run Full Node",permalink:"/docs/Validators/run-full-node"},next:{title:"Installation",permalink:"/docs/Guides/Installation"}},u={},c=[{value:"How to become a validator on IDEP Network",id:"how-to-become-a-validator-on-idep-network",level:2},{value:"1. Run a new full node on a new machine.",id:"1-run-a-new-full-node-on-a-new-machine",level:3},{value:"2. Set your `minimum-gas-price parameter",id:"2-set-your-minimum-gas-price-parameter",level:3},{value:"3. Generate a new key pair for yourself (change <code>&lt;key-alias&gt;</code> with any word of your choice, this is just for your internal/personal reference):",id:"3-generate-a-new-key-pair-for-yourself-change-key-alias-with-any-word-of-your-choice-this-is-just-for-your-internalpersonal-reference",level:3},{value:"4. Transfer tokens to your delegator&#39;s address:",id:"4-transfer-tokens-to-your-delegators-address",level:3},{value:"5. Check that you have the funds:",id:"5-check-that-you-have-the-funds",level:3},{value:"7. Check that you have been added as a validator:",id:"7-check-that-you-have-been-added-as-a-validator",level:3},{value:"Slashing for downtime",id:"slashing-for-downtime",level:4},{value:"Slashing for double-signing",id:"slashing-for-double-signing",level:4},{value:"Protecting your validator agains DDoS attacks",id:"protecting-your-validator-agains-ddos-attacks",level:3},{value:"Staking more tokens",id:"staking-more-tokens",level:3},{value:"Editing your Validator",id:"editing-your-validator",level:3},{value:"Seeing your rewards from being a validator",id:"seeing-your-rewards-from-being-a-validator",level:3},{value:"Seeing your commissions from your delegators",id:"seeing-your-commissions-from-your-delegators",level:3},{value:"Withdrawing rewards",id:"withdrawing-rewards",level:3},{value:"Withdrawing rewards+commissions",id:"withdrawing-rewardscommissions",level:3},{value:"Removing your validator",id:"removing-your-validator",level:3},{value:"Changing your validator&#39;s commission-rate",id:"changing-your-validators-commission-rate",level:3},{value:"Slashing",id:"slashing",level:3},{value:"Unjailing",id:"unjailing",level:4},{value:"Signing Info",id:"signing-info",level:4},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Query Parameters",id:"query-parameters-1",level:4}],m={toc:c};function p(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"how-to-become-a-validator-on-idep-network"},"How to become a validator on IDEP Network"),(0,o.kt)("p",null,"In order to become an active validator, you must have more stake than the bottom validator.\nYou may still execute the following steps, but you will not be active and therefore ",(0,o.kt)("strong",{parentName:"p"},"won't receive staking rewards"),"."),(0,o.kt)("h3",{id:"1-run-a-new-full-node-on-a-new-machine"},"1. Run a new full node on a new machine."),(0,o.kt)("p",null,"In order to become a validator, you node must be fully synced with the network. You can check this by doing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"iond status\n")),(0,o.kt)("p",null,"When the value of",(0,o.kt)("inlineCode",{parentName:"p"}," catching_up")," is ",(0,o.kt)("em",{parentName:"p"},"false"),", your node is fully synced with the network."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'"sync_info": {\n"latest_block_hash": "7BF95EED4EB50073F28CF833119FDB8C7DFE0562F611DF194CF4123A9C1F4640",\n"latest_app_hash": "7C0C89EC4E903BAC730D9B3BB369D870371C6B7EAD0CCB5080B5F9D3782E3559",\n"latest_block_height": "668538",\n"latest_block_time": "2020-10-31T17:50:56.800119764Z",\n"earliest_block_hash": "E7CAD87A4FDC47DFDE3D4E7C24D80D4C95517E8A6526E2D4BB4D6BC095404113",\n"earliest_app_hash": "",\n"earliest_block_height": "1",\n"earliest_block_time": "2021-09-15T14:02:31Z",\n"catching_up": false\n},\n')),(0,o.kt)("h3",{id:"2-set-your-minimum-gas-price-parameter"},"2. Set your `minimum-gas-price parameter"),(0,o.kt)("p",null,"We recommend starting with 0.0125uidep per gas unit:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"perl -i -pe 's/^minimum-gas-prices = .+?$/minimum-gas-prices = \"0.0125uidep\"/' ~/.iond/config/app.toml\nsudo systemctl restart secret-node\n")),(0,o.kt)("p",null,"Your validator will not accept transactions that specify ",(0,o.kt)("inlineCode",{parentName:"p"},"--gas-price")," lower than the",(0,o.kt)("inlineCode",{parentName:"p"}," minimun-gas-price")," you set here."),(0,o.kt)("h3",{id:"3-generate-a-new-key-pair-for-yourself-change-key-alias-with-any-word-of-your-choice-this-is-just-for-your-internalpersonal-reference"},"3. Generate a new key pair for yourself (change ",(0,o.kt)("inlineCode",{parentName:"h3"},"<key-alias>")," with any word of your choice, this is just for your internal/personal reference):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli keys add <key-alias>\n")),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"BACKUP YOUR MNEMONICS! Please make sure you also backup your validator"))),(0,o.kt)("p",null,"Note: If you already have a key you can import it with the bip39 mnemonic with idepcli keys add ",(0,o.kt)("inlineCode",{parentName:"p"},"<key-alias>")," --recover or with idepcli keys export (exports to stderr!!) & idepcli keys import."),(0,o.kt)("h3",{id:"4-transfer-tokens-to-your-delegators-address"},"4. Transfer tokens to your delegator's address:"),(0,o.kt)("p",null,"This is the idep wallet from which you delegate your funds to you own validator. You must delegate at least 1 IDEP (1000000uidep) from this wallet to your validator."),(0,o.kt)("p",null,"To create a secret wallet, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli keys add <key-alias>\n")),(0,o.kt)("p",null,"Make sure to backup the mnemonic you got from the above command!"),(0,o.kt)("p",null,"Then transfer funds to address you just created."),(0,o.kt)("h3",{id:"5-check-that-you-have-the-funds"},"5. Check that you have the funds:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q bank balances $(secretcli keys show -a <key-alias>)\n")),(0,o.kt)("p",null,"If you get the following message, it means that you have no tokens yet:"),(0,o.kt)("p",null,"ERROR: unknown address: account idep1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx does not exist"),(0,o.kt)("p",null,"#6. Join the network as a new validator: replace ",(0,o.kt)("inlineCode",{parentName:"p"},"<MONIKER>")," with the moniker you configured in step 3 of creating a full-node, and adjust the amount you want to stake"),(0,o.kt)("p",null,"remember 1 IDEP = 1,000,000 uidep, and so the command below stakes 100 IDEP."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'IDEPcli tx staking create-validator \\\n--amount=100000000uscrt \\\n--pubkey=$(iond tendermint show-validator) \\\n--identity={KEYBASE_IDENTITY} \\\n--details="To infinity and beyond!" \\\n--commission-rate="0.10" \\\n--commission-max-rate="0.20" \\\n--commission-max-change-rate="0.01" \\\n--min-self-delegation="1" \\\n--moniker=<MONIKER> \\\n--from=<key-alias>\n')),(0,o.kt)("h3",{id:"7-check-that-you-have-been-added-as-a-validator"},"7. Check that you have been added as a validator:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q staking validators | jq '.[] | select(.description.moniker == \"<MONIKER>\")'\n")),(0,o.kt)("p",null,"Or run: ",(0,o.kt)("inlineCode",{parentName:"p"},"IDEPcli q staking validators | grep moniker"),". You should see your moniker listed."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("h3",{parentName:"div",id:"dangers-in-running-a-validator"},"Dangers in running a validator"))),(0,o.kt)("p",null,"There are a couple of scenarios that can lead to losing a precentage of your and your delegators' stake. These are called slashing events."),(0,o.kt)("p",null,"The following is updated as of APR 30, 2022."),(0,o.kt)("h4",{id:"slashing-for-downtime"},"Slashing for downtime"),(0,o.kt)("p",null,"Conditions for downtime:"),(0,o.kt)("p",null,"It's based on actual blocktime as opposed to being based on theoretical blocktime ie (SignedBlocksWindow & MinSignedPerWindow network parameters)."),(0,o.kt)("p",null,"Signing less than ",(0,o.kt)("inlineCode",{parentName:"p"},"MinSignedPerWindow")," blocks out of every ",(0,o.kt)("inlineCode",{parentName:"p"},"SignedBlocksWindow")," window will result in a downtime slash. Blocktime tends to fluctuate on the network."),(0,o.kt)("p",null,"Parameters: 11250 blocks out of every 22500-blocks."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"For a block time of 6.8 seconds, this roughly translates to being up for 21.25 hours out of every 42.5-hour window.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"For a block time of 6.4 seconds, this roughly translates to being up for 20 hours out of every 40-hour window."))),(0,o.kt)("p",null,"Penalties for downtime:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Slashing of 0.01% of your and your delegators' staking amount."),(0,o.kt)("li",{parentName:"ul"},"Jailing for 10 minutes of your validator node. You don't earn block rewards for this period and at the end must manually unjail your node with secretcli tx slashing unjail --from ",(0,o.kt)("inlineCode",{parentName:"li"},"<key-alias>"),".")),(0,o.kt)("h4",{id:"slashing-for-double-signing"},"Slashing for double-signing"),(0,o.kt)("p",null,"Conditions for double-signing:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Your validator signs the same block height twice.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Penalties for double-signing:")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Slashing of 5% of your and your delegators' staking amount.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Jailing forever (tombstoned) of your validator node. You cannot earn block rewards anymore with this validator and you and your delegators must redelegate your stake to a different validator."))),(0,o.kt)("h3",{id:"protecting-your-validator-agains-ddos-attacks"},"Protecting your validator agains DDoS attacks"),(0,o.kt)("p",null,"See Sentry Nodes."),(0,o.kt)("h3",{id:"staking-more-tokens"},"Staking more tokens"),(0,o.kt)("p",null,"(remember 1 IDEP = 1,000,000 uidep)"),(0,o.kt)("p",null,"In order to stake more tokens beyond those in the initial transaction, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli tx staking delegate $(IDEPcli keys show <key-alias> --bech=val -a) <amount>uscrt --from <key-alias>\n")),(0,o.kt)("h3",{id:"editing-your-validator"},"Editing your Validator"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'IDEPcli tx staking edit-validator \\\n--moniker "<new-moniker>" \\\n--website "https://idep.network" \\\n--identity 6A0D65E29A4CBC8E \\\n--details "We come in peace!" \\\n--chain-id <chain_id> \\\n--from <key_name> \\\n--commission-rate "0.10"\n')),(0,o.kt)("h3",{id:"seeing-your-rewards-from-being-a-validator"},"Seeing your rewards from being a validator"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q distribution rewards $(IDEPcli keys show -a <key-alias>)\n")),(0,o.kt)("h3",{id:"seeing-your-commissions-from-your-delegators"},"Seeing your commissions from your delegators"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"secretcli q distribution commission $(secretcli keys show -a <key-alias> --bech=val)\n")),(0,o.kt)("h3",{id:"withdrawing-rewards"},"Withdrawing rewards"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"secretcli tx distribution withdraw-rewards $(secretcli keys show --bech=val -a `<key-alias>`) --from `<key-alias>`\n")),(0,o.kt)("h3",{id:"withdrawing-rewardscommissions"},"Withdrawing rewards+commissions"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"secretcli tx distribution withdraw-rewards $(secretcli keys show --bech=val -a `<key-alias>`) --from `<key-alias>` --commission\n")),(0,o.kt)("h3",{id:"removing-your-validator"},"Removing your validator"),(0,o.kt)("p",null,"Currently deleting a validator is not possible. If you redelegate or unbond your self-delegations then your validator will become offline and all your delegators will start to unbond."),(0,o.kt)("h3",{id:"changing-your-validators-commission-rate"},"Changing your validator's commission-rate"),(0,o.kt)("p",null,"You are currently unable to modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"--commission-max-rate")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"--commission-max-change-rate"),'" parameters.'),(0,o.kt)("p",null,"Modifying the commision-rate can be done using this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'IDEPcli tx staking edit-validator --commission-rate="0.05" --from <key-alias>\n')),(0,o.kt)("h3",{id:"slashing"},"Slashing"),(0,o.kt)("hr",null),(0,o.kt)("h4",{id:"unjailing"},"Unjailing"),(0,o.kt)("p",null,"To unjail your jailed validator"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli tx slashing unjail --from <key-alias>\n")),(0,o.kt)("h4",{id:"signing-info"},"Signing Info"),(0,o.kt)("p",null,"To retrieve a validator's signing info:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q slashing signing-info <validator-conspub-key>\n")),(0,o.kt)("h4",{id:"query-parameters"},"Query Parameters"),(0,o.kt)("p",null,"You can get the current slashing parameters via:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q slashing params\n")),(0,o.kt)("h4",{id:"query-parameters-1"},"Query Parameters"),(0,o.kt)("p",null,"You can get the current slashing parameters via:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"IDEPcli q slashing params\n")))}p.isMDXComponent=!0}}]);